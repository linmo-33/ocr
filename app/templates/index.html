<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>验证码识别系统</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <div class="header">
            <h1>🔐 验证码识别系统</h1>
            <p>基于 ddddocr 的智能验证码识别服务</p>
        </div>

        <!-- 主要内容 -->
        <div class="main-content">
            <!-- 左侧：功能区 -->
            <div class="card">
                <h2>识别功能</h2>
                
                <!-- 功能标签页 -->
                <div class="tabs">
                    <button class="tab active" data-type="classification">OCR识别</button>
                    <button class="tab" data-type="capcode">滑块识别</button>
                    <button class="tab" data-type="detection">目标检测</button>
                    <button class="tab" data-type="calculate">计算验证码</button>
                </div>

                <!-- OCR识别 -->
                <div id="classification-content" class="tab-content active">
                    <div class="form-group">
                        <label>图片输入（Base64/URL）</label>
                        <textarea id="classificationImage" placeholder="粘贴Base64编码或图片URL"></textarea>
                    </div>
                    <div class="form-group">
                        <div class="file-upload">
                            <input type="file" id="classificationImageFile" accept="image/*">
                            <label for="classificationImageFile" class="file-upload-label">
                                📁 或点击上传图片
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="preprocessClassification">
                            <label for="preprocessClassification">启用图片预处理（增强识别率）</label>
                        </div>
                    </div>
                </div>

                <!-- 滑块识别 -->
                <div id="capcode-content" class="tab-content">
                    <div class="form-group">
                        <label>滑块图片</label>
                        <textarea id="slidingImage" placeholder="Base64或URL"></textarea>
                        <div class="file-upload">
                            <input type="file" id="slidingImageFile" accept="image/*">
                            <label for="slidingImageFile" class="file-upload-label">📁 上传滑块图片</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>背景图片</label>
                        <textarea id="backImage" placeholder="Base64或URL"></textarea>
                        <div class="file-upload">
                            <input type="file" id="backImageFile" accept="image/*">
                            <label for="backImageFile" class="file-upload-label">📁 上传背景图片</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="simpleTarget" checked>
                            <label for="simpleTarget">简单目标模式</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="preprocessCapcode">
                            <label for="preprocessCapcode">启用图片预处理</label>
                        </div>
                    </div>
                </div>

                <!-- 目标检测 -->
                <div id="detection-content" class="tab-content">
                    <div class="form-group">
                        <label>图片输入</label>
                        <textarea id="detectionImage" placeholder="Base64或URL"></textarea>
                    </div>
                    <div class="form-group">
                        <div class="file-upload">
                            <input type="file" id="detectionImageFile" accept="image/*">
                            <label for="detectionImageFile" class="file-upload-label">📁 上传图片</label>
                        </div>
                    </div>
                </div>

                <!-- 计算验证码 -->
                <div id="calculate-content" class="tab-content">
                    <div class="form-group">
                        <label>计算题图片</label>
                        <textarea id="calculateImage" placeholder="Base64或URL"></textarea>
                    </div>
                    <div class="form-group">
                        <div class="file-upload">
                            <input type="file" id="calculateImageFile" accept="image/*">
                            <label for="calculateImageFile" class="file-upload-label">📁 上传图片</label>
                        </div>
                    </div>
                </div>

                <!-- 操作按钮 -->
                <button id="recognizeBtn" class="btn btn-primary">开始识别</button>
            </div>

            <!-- 右侧：结果和统计 -->
            <div>
                <!-- 识别结果 -->
                <div class="card">
                    <h2>识别结果</h2>
                    <div id="resultBox" class="result-box" style="display: none;">
                        <h3>结果</h3>
                        <div id="resultContent" class="result-content"></div>
                    </div>
                    <div style="text-align: center; color: #999; padding: 40px 0;" id="emptyResult">
                        等待识别...
                    </div>
                </div>

                <!-- 统计信息 -->
                <div class="card" style="margin-top: 20px;">
                    <h2>📊 使用统计</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalRequests">0</div>
                            <div class="stat-label">总请求数</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="successRate">0%</div>
                            <div class="stat-label">成功率</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="avgTime">0s</div>
                            <div class="stat-label">平均响应时间</div>
                        </div>
                    </div>
                </div>

                <!-- 更多功能 -->
                <div class="card" style="margin-top: 20px;">
                    <h2>🔗 更多功能</h2>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button class="tab" data-type="slideComparison">滑块对比</button>
                        <button class="tab" data-type="select">点选验证码</button>
                        <button class="tab" data-type="crop">图片分割</button>
                        <button class="tab" data-type="batch">批量识别</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 隐藏的其他功能内容 -->
        <div style="display: none;">
            <div id="slideComparison-content" class="tab-content">
                <div class="form-group">
                    <label>滑块图片</label>
                    <textarea id="slideImage" placeholder="Base64或URL"></textarea>
                </div>
                <div class="form-group">
                    <label>背景图片</label>
                    <textarea id="slideBackImage" placeholder="Base64或URL"></textarea>
                </div>
            </div>

            <div id="select-content" class="tab-content">
                <div class="form-group">
                    <label>点选验证码图片</label>
                    <textarea id="selectImage" placeholder="Base64或URL"></textarea>
                </div>
                <div class="form-group">
                    <div class="file-upload">
                        <input type="file" id="selectImageFile" accept="image/*">
                        <label for="selectImageFile" class="file-upload-label">📁 上传图片</label>
                    </div>
                </div>
            </div>

            <div id="crop-content" class="tab-content">
                <div class="form-group">
                    <label>图片URL</label>
                    <input type="text" id="cropImage" placeholder="输入图片URL">
                </div>
                <div class="form-group">
                    <label>Y坐标分割点</label>
                    <input type="number" id="yCoordinate" placeholder="例如: 100" value="100">
                </div>
            </div>

            <div id="batch-content" class="tab-content">
                <div class="form-group">
                    <label>批量图片（每行一个Base64或URL，最多20张）</label>
                    <textarea id="batchImages" placeholder="每行一个图片地址或Base64" style="min-height: 200px;"></textarea>
                </div>
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="preprocessBatch">
                        <label for="preprocessBatch">启用图片预处理</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- 页脚 -->
        <div class="footer">
            <p>
                <a href="/docs" target="_blank">📖 API文档</a> | 
                <a href="/examples" target="_blank">💡 使用示例</a> | 
                <a href="/health" target="_blank">💚 健康检查</a> | 
                <a href="/stats" target="_blank">📊 详细统计</a>
            </p>
            <p style="margin-top: 10px; font-size: 0.9rem;">
                Powered by ddddocr & Flask
            </p>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
